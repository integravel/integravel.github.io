<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag and Drop Grids</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        h1 {
            font-size: 48px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 500px);
            grid-template-rows: repeat(3, 300px);
            gap: 20px;
            margin: 20px 0;
            width: 100%;
            max-width: 2200px;
            height: auto;
        }
        .grid div {
            width: 500px;
            height: 300px;
            border: 5px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f9f9f9;
            overflow: hidden;
            position: relative;
            transition: border-color 0.3s ease;
        }
        .grid div.correct {
            border-color: green;
            border-width: 8px;
        }
        .grid div.incorrect {
            border-color: red;
            border-width: 8px;
        }
        .grid div img {
            width: 100%;
            height: auto;
            object-fit: contain;
            transition: transform 0.2s ease;
        }
        button {
            padding: 20px 40px;
            font-size: 32px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Drag and Drop Grids</h1>
    <div id="grid1" class="grid">
        <div data-correct="01"></div>
        <div data-correct="02"></div>
        <div data-correct="03"></div>
        <div data-correct="04"></div>
        <div data-correct="05"></div>
        <div data-correct="06"></div>
        <div data-correct="07"></div>
        <div data-correct="08"></div>
        <div data-correct="09"></div>
        <div data-correct="10"></div>
        <div data-correct="11"></div>
        <div data-correct="12"></div>
    </div>
    <div id="grid2" class="grid"></div>
    <button id="checkButton">Verificar posições</button>

    <script>
        let draggedImage = null;
        let initialX = 0;
        let initialY = 0;

        const imagesData = [
            { src: "01.png", alt: "01" },
            { src: "02.png", alt: "02" },
            { src: "03.png", alt: "03" },
            { src: "04.png", alt: "04" },
            { src: "05.png", alt: "05" },
            { src: "06.png", alt: "06" },
            { src: "07.png", alt: "07" },
            { src: "08.png", alt: "08" },
            { src: "09.png", alt: "09" },
            { src: "10.png", alt: "10" },
            { src: "11.png", alt: "11" },
            { src: "12.png", alt: "12" }
        ];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderImages() {
            const grid2 = document.getElementById('grid2');
            const shuffledImages = shuffle([...imagesData]);

            shuffledImages.forEach(image => {
                const cell = document.createElement('div');
                const img = document.createElement('img');
                img.src = image.src;
                img.alt = image.alt;
                img.draggable = true;
                cell.appendChild(img);
                grid2.appendChild(cell);
            });
        }

        function setupDragAndDrop() {
            const allCells = document.querySelectorAll('.grid div');
            allCells.forEach(cell => {
                cell.addEventListener('dragover', event => event.preventDefault());

                cell.addEventListener('drop', event => {
                    event.preventDefault();
                    if (draggedImage) {
                        const existingImage = cell.querySelector('img');
                        if (existingImage) {
                            draggedImage.parentNode.appendChild(existingImage);
                        }
                        cell.appendChild(draggedImage);
                        draggedImage.style.position = '';
                        draggedImage.style.left = '';
                        draggedImage.style.top = '';
                        draggedImage.style.zIndex = '';
                    }
                });
            });

            const allImages = document.querySelectorAll('img');
            allImages.forEach(image => {
                image.addEventListener('dragstart', event => {
                    draggedImage = event.target;
                });

                image.addEventListener('dragend', () => {
                    draggedImage = null;
                });

                // Adicionar suporte a toques em dispositivos móveis
                image.addEventListener('touchstart', event => {
                    draggedImage = event.target;
                    event.preventDefault();

                    const touch = event.touches[0];
                    initialX = touch.pageX - draggedImage.offsetLeft;
                    initialY = touch.pageY - draggedImage.offsetTop;

                    draggedImage.style.position = 'absolute';
                    draggedImage.style.zIndex = '1000'; // Move para a frente
                    draggedImage.style.left = `${touch.pageX - initialX}px`;
                    draggedImage.style.top = `${touch.pageY - initialY}px`;
                });

                image.addEventListener('touchmove', event => {
                    if (draggedImage) {
                        const touch = event.touches[0];
                        draggedImage.style.left = `${touch.pageX - initialX}px`;
                        draggedImage.style.top = `${touch.pageY - initialY}px`;
                    }
                });

                image.addEventListener('touchend', event => {
                    if (draggedImage) {
                        draggedImage.style.position = '';
                        draggedImage.style.left = '';
                        draggedImage.style.top = '';
                        draggedImage.style.zIndex = ''; // Remove destaque
                    }
                    draggedImage = null;
                });
            });
        }

        const checkButton = document.getElementById('checkButton');
        checkButton.addEventListener('click', () => {
            const grid1Cells = document.querySelectorAll('#grid1 > div');

            grid1Cells.forEach(cell => {
                const image = cell.querySelector('img');
                cell.classList.remove('correct', 'incorrect');

                if (image) {
                    const correctValue = cell.getAttribute('data-correct');
                    const imageValue = image.getAttribute('alt');

                    if (correctValue === imageValue) {
                        cell.classList.add('correct');
                    } else {
                        cell.classList.add('incorrect');
                    }
                }
            });

            const allImages = document.querySelectorAll('img');
            allImages.forEach(image => {
                image.draggable = false;
            });
        });

        renderImages();
        setupDragAndDrop();
    </script>
</body>
</html>
